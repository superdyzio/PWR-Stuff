<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>// Place global declarations here.
const int liczbaKlientow = 2;
const int maxCzas = 10;
int [1, liczbaKlientow] klient;
int [1, 2] aktywneId;

chan SYN, SYNACK, ACK, ABORT;
broadcast chan OPEN, CLOSE;</declaration><template><name x="5" y="5">Serwer</name><declaration>// Place local declarations here.
</declaration><location id="id0" x="176" y="-16"><committed/></location><location id="id1" x="72" y="-16"><name x="40" y="-56">handshake</name></location><location id="id2" x="-48" y="-16"><name x="-72" y="-56">odpowiedz</name></location><location id="id3" x="-176" y="-16"></location><location id="id4" x="-288" y="-16"><name x="-312" y="-56">gotowosc</name></location><init ref="id4"/><transition><source ref="id3"/><target ref="id4"/><label kind="synchronisation" x="-240" y="8">ABORT?</label><nail x="-176" y="24"/><nail x="-288" y="24"/></transition><transition><source ref="id0"/><target ref="id4"/><nail x="248" y="-16"/><nail x="248" y="48"/><nail x="-336" y="48"/><nail x="-336" y="-16"/></transition><transition><source ref="id1"/><target ref="id0"/><label kind="synchronisation" x="96" y="-16">OPEN!</label></transition><transition><source ref="id2"/><target ref="id1"/><label kind="synchronisation" x="-16" y="-16">ACK?</label></transition><transition><source ref="id3"/><target ref="id2"/><label kind="synchronisation" x="-152" y="-16">SYNACK!</label></transition><transition><source ref="id4"/><target ref="id3"/><label kind="synchronisation" x="-264" y="-16">SYN?</label></transition></template><template><name>Klient</name><parameter>const int [1, liczbaKlientow] id</parameter><declaration>clock czas;
int [0, 3] czasOczekiwania;
int minCzas;</declaration><location id="id5" x="-176" y="88"><committed/></location><location id="id6" x="96" y="-56"><name x="104" y="-88">polaczony</name><label kind="invariant" x="64" y="-40">czas &lt;= maxCzas</label></location><location id="id7" x="-96" y="-56"><name x="-120" y="-96">laczenie</name></location><location id="id8" x="-264" y="-56"><name x="-296" y="-96">oczekiwanie</name><label kind="invariant" x="-320" y="-40">czas &lt;= czasOczekiwania</label></location><location id="id9" x="-432" y="-56"><name x="-512" y="-48">rozlaczony</name></location><init ref="id9"/><transition><source ref="id8"/><target ref="id9"/><label kind="guard" x="-432" y="-120">czasOczekiwania == czas</label><label kind="synchronisation" x="-384" y="-136">ABORT!</label><nail x="-360" y="-96"/></transition><transition><source ref="id5"/><target ref="id9"/><label kind="synchronisation" x="-392" y="64">CLOSE!</label><label kind="assignment" x="-408" y="88">aktywneId = id</label><nail x="-432" y="88"/></transition><transition><source ref="id6"/><target ref="id5"/><label kind="guard" x="-72" y="64">czas &gt;= minCzas</label><nail x="96" y="88"/></transition><transition><source ref="id7"/><target ref="id6"/><label kind="select" x="-48" y="-88">i: int[0, maxCzas]</label><label kind="synchronisation" x="-60" y="-71">ACK!</label><label kind="assignment" x="-60" y="-56">minCzas = i,
czas = 0,
aktywneId = id</label></transition><transition><source ref="id8"/><target ref="id7"/><label kind="synchronisation" x="-216" y="-72">SYNACK?</label></transition><transition><source ref="id9"/><target ref="id8"/><label kind="synchronisation" x="-408" y="-71">SYN!</label><label kind="assignment" x="-408" y="-56">klient = id,
czas = 0</label></transition></template><template><name>Sesja</name><parameter>const int [1, liczbaKlientow] id</parameter><location id="id10" x="56" y="-16"><name x="56" y="-48">otwarta</name></location><location id="id11" x="-256" y="-8"><name x="-320" y="-40">zamknieta</name></location><init ref="id11"/><transition><source ref="id10"/><target ref="id11"/><label kind="guard" x="-152" y="-64">id == aktywneId</label><label kind="synchronisation" x="-128" y="-80">CLOSE?</label><nail x="-104" y="-104"/></transition><transition><source ref="id11"/><target ref="id10"/><label kind="guard" x="-136" y="8">id == aktywneId</label><label kind="synchronisation" x="-120" y="24">OPEN?</label><nail x="-88" y="64"/></transition></template><system>// Place template instantiations here.

// List one or more processes to be composed into a system.
system Klient, Serwer, Sesja;</system></nta>